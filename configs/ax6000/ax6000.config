# Redmi AX6000 (MediaTek MT7986/Filogic) 专用设备配置
# 基于 ImmortalWrt 24.10+（包括 padavanonly mt798x 6.6 内核分支）优化
# 此文件为 diffconfig 风格，直接 cat 到 .config 或覆盖使用，后接 make defconfig 展开
# 目标：启用 AX6000 所有硬件功能（满血 Wi-Fi 6、硬件 NAT、PPPoE、IPv6 等）

# 目标设备选择（强烈推荐 ubootmod：更多闪存空间、无小米 U-Boot 限制、易恢复官方）
CONFIG_TARGET_mediatek=y
CONFIG_TARGET_mediatek_filogic=y
CONFIG_TARGET_mediatek_filogic_DEVICE_xiaomi_redmi-router-ax6000-ubootmod=y
# 如需保留小米官方恢复功能，改成: CONFIG_TARGET_mediatek_filogic_DEVICE_xiaomi_redmi-router-ax6000-stock=y

# MT7986 SoC 核心支持（必须）
CONFIG_MEDIATEK_MT7986=y
CONFIG_MTK_CONNINFRA_APSOC_MT7986=y
CONFIG_MTK_FIRST_IF_EEPROM_FLASH=y  # 第一接口 EEPROM 在闪存中

# Wi-Fi 6 满血配置（AX6000 专属参数，必须启用否则信号/速率不完整）
CONFIG_MTK_WIFI_ADIE_TYPE="mt7976"   # Wi-Fi 芯片 ADIE 类型（MT7976 双频）
CONFIG_MTK_WIFI_SKU_TYPE="AX6000"    # SKU 类型，确保 4x4 MU-MIMO 满功率
CONFIG_PACKAGE_kmod-mt_wifi=y        # MTK Wi-Fi 主驱动
CONFIG_PACKAGE_kmod-mt7915e=y        # MT7915E 模块（5GHz 支持）
CONFIG_PACKAGE_wireless-tools=y      # 无线工具（如 iwconfig）
CONFIG_PACKAGE_iw=y                  # iw 命令行工具
CONFIG_PACKAGE_iwinfo=y              # LuCI Wi-Fi 信息支持
CONFIG_PACKAGE_wireless-regdb=y      # 无线监管域数据库（全信道支持）

# 硬件 NAT 与流量加速（AX6000 千兆满速关键）
CONFIG_PACKAGE_kmod-mediatek_hnat=y  # MediaTek 硬件 NAT 加速
CONFIG_PACKAGE_kmod-ipt-offload=y    # IPTables 硬件卸载
CONFIG_PACKAGE_kmod-nf-flow=y        # Netfilter 流卸载（软件+硬件结合）

# PPPoE 拨号上网支持（必须）
CONFIG_PACKAGE_ppp=y
CONFIG_PACKAGE_ppp-mod-pppoe=y
CONFIG_PACKAGE_luci-proto-ppp=y      # LuCI 中 PPPoE 配置界面

# 内核性能优化（推荐全开，提升路由稳定性与速度）
CONFIG_KERNEL_IP_MROUTE=y
CONFIG_KERNEL_IP_MROUTE_MULTIPLE_TABLES=y
CONFIG_KERNEL_IPV6_MULTIPLE_TABLES=y
CONFIG_KERNEL_IPV6_SEG6_HMAC=y
CONFIG_KERNEL_IPV6_SUBTREES=y
CONFIG_KERNEL_NETEM=y                # 网络仿真（测试用）
CONFIG_KERNEL_TCP_CONG_BBR=y         # BBR 拥塞控制（宽带下延迟低、速度快）

# 其他推荐功能
CONFIG_DEVEL=y                       # 启用开发工具（dropbear、strace 等，便于调试）
CONFIG_BUSYBOX_CUSTOM=y              # 自定义 BusyBox（更多命令）
CONFIG_TARGET_PER_DEVICE_ROOTFS=y    # 设备独立根文件系统（便于定制）

# 可选关闭以减小固件大小（视需求注释）
# CONFIG_GDB=n
# CONFIG_KERNEL_CFS_BANDWIDTH=n