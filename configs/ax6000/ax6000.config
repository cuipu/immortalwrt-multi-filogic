# This is the device-specific configuration file for the Redmi AX6000 (based on MediaTek MT7986/Filogic).
# It sets the build target to mediatek/filogic and selects the Xiaomi Redmi Router AX6000 profile.
# This config is appended to base.config during build.
# It includes kernel and hardware-specific settings for Wi-Fi, NAT, and performance.
# Version: Tailored for ImmortalWrt 24.10+.
# Note: This is a diffconfig style file; use with 'make defconfig' to expand.

# Target selection for Redmi AX6000
CONFIG_TARGET_mediatek=y
CONFIG_TARGET_mediatek_filogic=y
CONFIG_TARGET_mediatek_filogic_DEVICE_xiaomi_redmi-router-ax6000-ubootmod=y  # Use U-Boot mod for custom flashing; change to -stock if needed

# Kernel features for performance and compatibility
CONFIG_KERNEL_IP_MROUTE=y  # Enable IP multicast routing
CONFIG_KERNEL_IP_MROUTE_MULTIPLE_TABLES=y  # Support multiple multicast tables
CONFIG_KERNEL_IPV6_MULTIPLE_TABLES=y  # IPv6 multiple tables for advanced routing
CONFIG_KERNEL_IPV6_SEG6_HMAC=y  # IPv6 segment routing HMAC
CONFIG_KERNEL_IPV6_SUBTREES=y  # IPv6 subtrees for routing
CONFIG_KERNEL_NETEM=y  # Network emulation for testing
CONFIG_KERNEL_TCP_CONG_BBR=y  # Enable TCP BBR congestion control for better throughput

# Hardware-specific MT7986 features
CONFIG_MEDIATEK_MT7986=y  # Enable MT7986 SoC support
CONFIG_MTK_CONNINFRA_APSOC_MT7986=y  # ConnInfra for AP SoC
CONFIG_MTK_WIFI_ADIE_TYPE="mt7976"  # ADIE type for MT7976 Wi-Fi chip
CONFIG_MTK_WIFI_SKU_TYPE="AX6000"  # Set Wi-Fi SKU to AX6000 specs
CONFIG_MTK_FIRST_IF_EEPROM_FLASH=y  # EEPROM in flash for first interface

# Wi-Fi driver and features (essential for AX6000's 802.11ax)
CONFIG_PACKAGE_kmod-mt_wifi=y  # MTK Wi-Fi driver
CONFIG_PACKAGE_kmod-mt7915e=y  # MT7915E Wi-Fi module (for 5GHz)
CONFIG_PACKAGE_wireless-tools=y  # Wireless tools like iwconfig
CONFIG_PACKAGE_iw=y  # iw command for Wi-Fi management
CONFIG_PACKAGE_iwinfo=y  # iwinfo for LuCI integration
CONFIG_PACKAGE_wireless-regdb=y  # Regulatory database for Wi-Fi channels

# NAT and offloading for better performance
CONFIG_PACKAGE_kmod-ipt-offload=y  # IP tables offload
CONFIG_PACKAGE_kmod-nf-flow=y  # Netfilter flow offload
CONFIG_PACKAGE_kmod-mediatek_hnat=y  # MediaTek HNAT for hardware NAT acceleration

# Debugging and development (optional but recommended for custom builds)
CONFIG_DEVEL=y  # Enable development tools
CONFIG_BUSYBOX_CUSTOM=y  # Custom BusyBox config
CONFIG_TARGET_PER_DEVICE_ROOTFS=y  # Per-device root filesystem for customization

# Disabled unnecessary features to reduce size
# CONFIG_GDB=n  # Disable GDB
# CONFIG_KERNEL_CFS_BANDWIDTH=n  # Disable CFS bandwidth control